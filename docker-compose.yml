version: "3.9"

services:
  api:
    build:
      context: .
      dockerfile: Dockerfile
    image: explainable-coding-api
    container_name: explainable-coding-api
    ports:
      - "8084:8084"
    env_file:
      - .env
    # Uncomment the next line if you prefer to mount models at runtime
    # volumes:
    #   - ./models:/app/models

  ui:
    build:
      context: .
      dockerfile: demo-ui/Dockerfile
    image: explainable-coding-ui
    container_name: explainable-coding-ui
    depends_on:
      - api
    ports:
      - "8090:8090"
    environment:
      UPSTREAM_API_BASE: http://api:8084
    volumes:
      - ./demo-ui/output:/app/demo-ui/output
    env_file:
      - .env

